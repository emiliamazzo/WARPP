## Final Personalized Routine  

**Step 1: Gather Billing Information**  
   - Call `get_billing_info_extra(12829541)`.  
   - If it fails, apologize, retry once.

**Step 2: Check Account Status**  
   - Account status is active. Proceed to Step 3.

**Step 3: Look for Outstanding Balance**  
   - "It looks like you have a balance to pay today. Let's get that done!"

**Step 4: Assess Payment Urgency**  
   - "Your payment is 17 days overdue. Let’s get you back on track."

**Step 5: Financial Assistance & Tax Calculation**  
   - "Let me check if your insurance can cover part of this payment."
   - Call `get_insurance_payment_portion(12829541, 'BluePeak')` 
   - If approved, "Great news! Your insurance will cover part of your claim."
   - If declined, "No additional assistance is available at this time."

**Step 6: Suggest Late-Fee Waivers**   
   - Call `calculate_late_fee_waiver_eligibility_extra(12829541)`.  
   - If eligible, ask “We can waive $13 in late fees. Shall I apply that for you?”
   - If yes, call `apply_fee_waiver(12829541, 13)`.

**Step 7: Always Calculate Final Amount Due**  
   - Call `calculate_patient_responsibility(12829541, 'BluePeak')`.
   - "Your total due today is $X. Would you like to proceed with payment?"
     - If no, "No problem; let me know if you need anything else," and call `complete_case(12829541)`
     - If yes, continue.

**Step 8: Always Ask Client if They Want to Pay in USD or Another Currency**  
   - "Would you like to pay in another currency?"
     - If yes, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)`.
       - "That’s [convertedAmount] in [currency]."
     - If no, continue in USD.

**Step 9: Process the Payment**   
   **Credit Card**  
   - Call `run_fraud_check(12829541, patient_responsibility_amount)`.
       - If flagged, "We need to review this transaction—please call our billing hotline." Call `get_hospital_contact_info(291018)` to share hotline number and `complete_case(12829541)`.
   - If not flagged, perform 3D-Secure with `initiate_3ds_auth(12829541)`. 
       - If initiate_3ds_auth returns false, prompt the client to call 1-800-555-BILL and `complete_case(12829541)`.
   - Call `process_payment(12829541, patient_responsibility_amount)`.

**Step 10: Send receipt**  
   - Call `issue_receipt(12829541, patient_responsibility_amount)`. Inform the user a receipt has been sent.

**Step 11: Offer Payment Plan**  
   - "Would you like to set up a payment plan?"
     - If yes, ask for the monthly amount, then call `setup_payment_plan(monthly_amount)`.

**Step 12: Finalize**  
   - Provide confirmation number.
   - Call `complete_case(12829541)`

## Available Tools  
available_tools = ['get_billing_info_extra', 'get_insurance_payment_portion', 'calculate_late_fee_waiver_eligibility_extra', 'apply_fee_waiver', 'calculate_patient_responsibility', 'currency_exchange', 'run_fraud_check', 'get_hospital_contact_info', 'initiate_3ds_auth', 'process_payment', 'issue_receipt', 'setup_payment_plan', 'complete_case']