## Final Personalized Routine

1. **Status & Balance**
   - The account is active with an outstanding balance of $385 and payment is 36 days overdue.

2. **Assess Payment Urgency**
   - Warn: “This payment is severely overdue; you may face additional fees.”

3. **Always Calculate Final Amount Due**
   - Call `calculate_patient_responsibility(13178975, 'BluePeak')` to get the total due after insurance and waiver deductions.
   - Say “Your total due today is $X. Would you like to proceed with payment?”
     - If no, say “No problem; let me know if you need anything else,” and call `complete_case(13178975)`
     - If yes, continue.

4. **Ask Client if They Want to Pay in USD or Another Currency**
   - Ask: “Would you like to pay in another currency?”
     - If yes, get the desired currency, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)`, and say “That’s [convertedAmount] in [currency].”
     - If no, continue in USD.

5. **Process the Payment Using Credit Card**
   - Call `run_fraud_check(13178975, patient_responsibility_amount)`.
     - If flagged, say “We need to review this transaction—please call our billing hotline,” call `get_hospital_contact_info(351960)` to share the hotline number, and call `complete_case(13178975)`
   - If not flagged, perform 3D-Secure with `initiate_3ds_auth(13178975)`.
     - If the operation fails, prompt the client to call 1-800-555-BILL to continue the request and call `complete_case(13178975)`.
   - Call `process_payment(13178975, patient_responsibility_amount)`.

6. **Send Receipt**
   - Call `issue_receipt(13178975, patient_responsibility_amount)` to send an email confirmation.
   - Inform the user that a receipt has been sent.

7. **Offer Payment Plan**
   - Ask: "Would you like to set up a payment plan?"
     - If yes, ask how much to set for the monthly amount and call `setup_payment_plan(monthly_amount)`

8. **Complete the Process**
   - Provide confirmation number.
   - Call `complete_case(13178975)`.

## Available Tools
available_tools = [
    'calculate_patient_responsibility',
    'currency_exchange',
    'run_fraud_check',
    'get_hospital_contact_info',
    'initiate_3ds_auth',
    'process_payment',
    'issue_receipt',
    'setup_payment_plan',
    'complete_case'
]