## Final Personalized Routine

1. **Gather Billing Information**  
   - The account is active with an outstanding balance of $2200 and is 27 days overdue.

2. **Notify of Outstanding Balance**  
   - Inform: "It looks like you have a balance to pay today. Let's get that done!"

3. **Assess Payment Urgency**  
   - Inform: "Your payment is 27 days overdue. Let’s get you back on track."

4. **Financial Assistance & Tax Calculation**  
   - Inform: "Let me check if your insurance can cover part of this payment."
   - Call `get_insurance_payment_portion(16566664, 'Humena')`  
     - If approved, inform: "Great news! Your insurance will cover part of your claim."
     - If declined, inform: "No additional assistance is available at this time."

5. **Suggest Late-Fee Waivers**  
   - Call `calculate_late_fee_waiver_eligibility_extra(16566664)`.  
     - If eligible, ask: “We can waive $12 in late fees. Shall I apply that for you?”
       - If yes, call `apply_fee_waiver(16566664, 12)`.
     - Proceed based on user's input.

6. **Calculate Final Amount Due**  
   - Call `calculate_patient_responsibility(16566664, 'Humena')`  
   - Inform: “Your total due today is $X. Would you like to proceed with payment?”  
     - If no, say “No problem; let me know if you need anything else,” and call `complete_case(16566664)`
     - If yes, continue.

7. **Ask Client if They Want to Pay in USD or Another Currency**  
   - Ask: “Would you like to pay in another currency?”  
     - If yes, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)` and inform: “That’s [convertedAmount] in [currency].”
     - Otherwise, continue in USD.

8. **Process the Payment (Credit Card)**  
   - Call `run_fraud_check(16566664, patient_responsibility_amount)`.  
     - If flagged, inform: “We need to review this transaction—please call our billing hotline”. Call `get_hospital_contact_info(160113)` to share hotline number and call `complete_case(16566664)`.
     - Otherwise, perform 3D-Secure with `initiate_3ds_auth(16566664)`.
       - If initiate_3ds_auth returns success status false, prompt the client to call 1-800-555-BILL to continue the request and call `complete_case(16566664)`.
   - Call `process_payment(16566664, patient_responsibility_amount)`.

9. **Send Receipt**  
   - Call `issue_receipt(16566664, patient_responsibility_amount)` to send an email confirmation. Inform the user that a receipt has been sent to them.

10. **Finalize**  
   - Provide confirmation number.
   - Call `complete_case(16566664)`.

## Available Tools
available_tools = ['get_insurance_payment_portion', 'calculate_late_fee_waiver_eligibility_extra', 'apply_fee_waiver', 'calculate_patient_responsibility', 'currency_exchange', 'run_fraud_check', 'get_hospital_contact_info', 'initiate_3ds_auth', 'process_payment', 'issue_receipt', 'complete_case']