## Final Personalized Routine

1. **Gather Billing Information**  
   - The outstanding balance is $975. The account is delinquent and medium urgency with payment 11 days overdue.

2. **Look for Outstanding Balance**  
   - Tell the client: "It looks like you have a balance to pay today. Let's get that done!"

3. **Assess Payment Urgency**  
   - Say: “Your payment is 11 days overdue. Let’s get you back on track.”

4. **Financial Assistance & Tax Calculation**  
   - Inform the user: "Let me check if your insurance can cover part of this payment."
   - Call `get_insurance_payment_portion(customer_id, insurance_provider)`.
     - If approved, say "Great news! Your insurance will cover part of your claim."
     - If declined, say "No additional assistance is available at this time."

5. **Always Calculate Final Amount Due**  
   - Call `calculate_patient_responsibility(customer_id, insurance_provider)` to get total_due after insurance deductions. 
   - Say: “Your total due today is $X. Would you like to proceed with payment?”
     - If no, say “No problem; let me know if you need anything else,” and call `complete_case(customer_id)`
     - If yes, continue.

6. **Always Ask Client if They Want to Pay in USD or Another Currency**  
   - Ask: “Would you like to pay in another currency?”
     - If the user wants to pay in another currency, get the desired currency, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)`, and tell them “That’s [convertedAmount] in [currency].”
     - If the user doesn't want to pay in another currency, continue in USD.

7. **Process the Payment**  
   - **Digital Wallet (e.g. PayPal)**
     1. Call `get_wallet_link(customer_id)` and ask them to complete payment in their browser.
     2. Call `check_wallet_payment_status(payment_id)` to verify the payment went through.

8. **Send Receipt**  
   - Call `issue_receipt(customer_id, patient_responsibility_amount)` to send an email confirmation. Inform the user that a receipt has been sent to them.

9. **Offer Payment Plan**  
   - Ask: "Would you like to set up a payment plan?"
     - If customer replies 'yes': ask how much to set for the monthly amount and call `setup_payment_plan(monthly_amount)`

10. **Finalize**  
    - Provide confirmation number
    - Call `complete_case(customer_id)`

## Available Tools
available_tools = ['get_insurance_payment_portion', 'calculate_patient_responsibility', 'currency_exchange', 'get_wallet_link', 'check_wallet_payment_status', 'issue_receipt', 'setup_payment_plan', 'complete_case']