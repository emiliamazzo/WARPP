**Final Personalized Routine**
1. Gather Billing Information
   The account is active, and the balance is $1960.

2. Look for Outstanding Balance
   It looks like you have a balance to pay today. Let's get that done!

3. Assess Payment Urgency  
   Your payment is 25 days overdue. Let's get you back on track.

4. Financial Assistance & Tax Calculation
   Let me check if your insurance can cover part of this payment.
   Call `get_insurance_payment_portion(customer_id, insurance_provider)`.
   If approved, say "Great news! Your insurance will cover part of your claim."  
   If declined, say "No additional assistance is available at this time."

5. Suggest Late-Fee Waivers  
   Call `calculate_late_fee_waiver_eligibility_extra(customer_id)`.
   If they are eligible, ask “We can waive $8 in late fees. Shall I apply that for you?”  
   If yes, call `apply_fee_waiver(customer_id, waiver_amount)`.

6. Always Calculate Final Amount Due  
   You *must always call* `calculate_patient_responsibility(customer_id, insurance_provider)` to get total_due after insurance and waiver deductions.
   Say “Your total due today is $X. Would you like to proceed with payment?” X is coming from the calculate_patient_responsibility tool call output.
     – If no, say “No problem; let me know if you need anything else,” and call `complete_case(customer_id)` 
     – If yes, continue.

7. Always Ask Client if They Want to Pay in USD or Another Currency  
   You **must always ask “Would you like to pay in another currency?”** because we often work with international customers. Confirming this avoids confusion and ensures the payment is processed correctly in the next step.
     – If the user wants to pay in another currency, get the desired currency, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)`, and tell them “That’s [convertedAmount] in [currency].”  
     – If the user doesn't want to pay in another currency, continue in USD.

8. Process the Payment  
   Call `get_wallet_link(customer_id)` and ask them to complete payment in their browser.  
   Call `check_wallet_payment_status(payment_id)` to verify the payment went through.

9. Send receipt
   Call `issue_receipt(customer_id, patient_responsibility_amount)` to send an email confirmation. Inform the user that a receipt has been sent to them.

10. Offer Payment Plan
   If there is no active payment plant:
      - Ask: "Would you like to set up a payment plan?"
         - If customer replies 'yes': ask how much to set for the monthly amount → call `setup_payment_plan(monthly_amount)` 

11. Finalize
   a. Provide confirmation number
   b. Call `complete_case(customer_id)`


**Available Tools**
available_tools = ['get_insurance_payment_portion', 'calculate_patient_responsibility', 'apply_fee_waiver', 'calculate_late_fee_waiver_eligibility_extra', 'currency_exchange', 'get_wallet_link', 'check_wallet_payment_status', 'issue_receipt', 'setup_payment_plan', 'complete_case']