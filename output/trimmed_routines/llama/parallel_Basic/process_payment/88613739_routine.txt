**Final Personalized Routine**
1. Gather Billing Information  
   The account is active.

2. Check Account Status  
   The account is active, so we can continue.

3. Look for Outstanding Balance  
   It looks like you have a balance to pay today. Let's get that done!

4. Assess Payment Urgency  
   Your payment is 11 days overdue. Let’s get you back on track.

5. Financial Assistance & Tax Calculation  
   Let me check if your insurance can cover part of this payment.
   Call `get_insurance_payment_portion(customer_id, BluePeak)`.
   If approved, say "Great news! Your insurance will cover part of your claim."
   If declined, say "No additional assistance is available at this time."

6. Always Calculate Final Amount Due  
   Call `calculate_patient_responsibility(customer_id, BluePeak)` to get total_due after insurance and waiver deductions.
   Say “Your total due today is $X. Would you like to proceed with payment?” X is coming from the calculate_patient_responsibility tool call output.
     – If no, say “No problem; let me know if you need anything else,” and call `complete_case(customer_id)` 
     – If yes, continue.

7. Always Ask Client if They Want to Pay in USD or Another Currency  
   You **must always ask “Would you like to pay in another currency?”** because we often work with international customers. 
   – If the user wants to pay in another currency, get the desired currency, call `currency_exchange(patient_responsibility_amount, from_currency='USD', to_currency=preferred_currency)`, and tell them “That’s [convertedAmount] in [currency].”  
   – If the user doesn't want to pay in another currency, continue in USD.

8. Process the Payment  
   Since the payment method is Credit Card, call `run_fraud_check(customer_id, patient_responsibility_amount)`. 
   Make sure the patient responsibility amount is in the customer's preferred currency. 
   If run_fraud_check returns flagged, say “We need to review this transaction—please call our billing hotline”. 
   Call `get_hospital_contact_info(hospital_id)` to share hotline number and call `complete_case(customer_id)`  
   Otherwise, perform 3D-Secure with `initiate_3ds_auth(customer_id)`. 
   –If initiate_3ds_auth returns success status false, prompt the client to call 1-800-555-BILL to continue the request and call `complete_case(customer_id)`. 
   Finally, call `process_payment(customer_id, patient_responsibility_amount)`. 
   Make sure the patient responsibility amount is in the customer's preferred currency.

9. Send receipt  
   You must always call `issue_receipt(customer_id, patient_responsibility_amount)` to send an email confirmation. 
   Make sure the patient responsibility amount is in the customer's preferred currency. 
   Inform the user that a receipt has been sent to them.

10. Finalize  
   Provide confirmation number
   Call `complete_case(customer_id)`  

available_tools = ['get_insurance_payment_portion', 'calculate_patient_responsibility', 'currency_exchange', 'run_fraud_check', 'get_hospital_contact_info', 'initiate_3ds_auth', 'process_payment', 'issue_receipt', 'complete_case']